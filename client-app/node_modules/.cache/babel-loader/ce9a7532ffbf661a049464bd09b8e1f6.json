{"ast":null,"code":"var _jsxFileName = \"/Users/noamk/Documents/GitHub/music-map/client-app/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { axios } from './axios';\nimport { HashRouter, Route } from 'react-router-dom';\nimport HomePage from './pages/HomePage';\nimport LoginPage from './pages/LoginPage';\nimport ArtistPage from './pages/ArtistPage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [artistsFull, setArtistsFull] = useState([]);\n  const [locationsFull, setLocationsFull] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [artistsResults, setArtistsResults] = useState([]);\n  const [locationsResults, setLocationsResults] = useState([]);\n  const [selectedArtist, setSelectedArtist] = useState(artistsFull[0]); //**** GET DATA  */\n\n  const getAllArtists = async () => {\n    const response = await axios.get('/artists').catch(err => console.log('Error: ', err));\n\n    if (response && response.data) {\n      setArtistsFull(response.data);\n      setArtistsResults(response.data);\n    }\n  };\n\n  const getAllLocations = async () => {\n    const response = await axios.get('/locations').catch(err => console.log('Error: ', err));\n    if (response && response.data) setLocationsFull(response.data);\n  };\n\n  useEffect(() => {\n    getAllArtists();\n    getAllLocations();\n  }, []);\n\n  const getLocationsList = () => {\n    const locationsIdList = artistsResults.map(a => a.location);\n    const locationsToMark = locationsFull.filter(m => locationsIdList.includes(m.id));\n    setLocationsResults(locationsToMark);\n    console.log(locationsResults);\n  }; //return only artist with names that includes the input\n\n\n  const searchHandler = () => {\n    if (searchTerm !== '') {\n      console.log('in searchhandler');\n      const newArtistlist = artistsFull.filter(a => {\n        return Object.values(a).join(' ').toLowerCase().includes(searchTerm.toLowerCase());\n      });\n      setArtistsResults(newArtistlist); //get distinct locations array from artistresults list\n\n      getLocationsList();\n    } else {\n      setArtistsResults(artistsFull);\n      getLocationsList();\n    }\n  };\n\n  const headerText = 'Admin'; // go to artist page once artist selected\n\n  useEffect(() => {\n    console.log('link to this artist page', selectedArtist);\n  }, [selectedArtist]); // const history = useHistory();\n  // const goLoginPage = () => history.push('/login');\n\n  const getInput = inputTerm => {\n    setSearchTerm(inputTerm);\n    searchHandler();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(HashRouter, {\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          children: /*#__PURE__*/_jsxDEV(HomePage, {\n            artists: artistsResults,\n            locations: locationsResults,\n            selectedArtistsCB: setSelectedArtist,\n            getInput: getInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/login\",\n          children: /*#__PURE__*/_jsxDEV(LoginPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/artist/:id\",\n          children: /*#__PURE__*/_jsxDEV(ArtistPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"footer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 19\n    }, this), \";\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 13\n  }, this);\n};\n\n_s(App, \"ggXj7DUiyqPSOAGouC/9ENwawlk=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/noamk/Documents/GitHub/music-map/client-app/src/App.js"],"names":["React","useState","useEffect","axios","HashRouter","Route","HomePage","LoginPage","ArtistPage","App","artistsFull","setArtistsFull","locationsFull","setLocationsFull","searchTerm","setSearchTerm","artistsResults","setArtistsResults","locationsResults","setLocationsResults","selectedArtist","setSelectedArtist","getAllArtists","response","get","catch","err","console","log","data","getAllLocations","getLocationsList","locationsIdList","map","a","location","locationsToMark","filter","m","includes","id","searchHandler","newArtistlist","Object","values","join","toLowerCase","headerText","getInput","inputTerm"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { axios } from './axios';\nimport { HashRouter, Route } from 'react-router-dom';\nimport HomePage from './pages/HomePage';\nimport LoginPage from './pages/LoginPage';\nimport ArtistPage from './pages/ArtistPage';\n\nconst App = () => {\n      const [artistsFull, setArtistsFull] = useState([]);\n      const [locationsFull, setLocationsFull] = useState([]);\n\n      const [searchTerm, setSearchTerm] = useState('');\n\n      const [artistsResults, setArtistsResults] = useState([]);\n      const [locationsResults, setLocationsResults] = useState([]);\n\n      const [selectedArtist, setSelectedArtist] = useState(artistsFull[0]);\n\n      //**** GET DATA  */\n      const getAllArtists = async () => {\n            const response = await axios\n                  .get('/artists')\n                  .catch((err) => console.log('Error: ', err));\n            if (response && response.data) {\n                  setArtistsFull(response.data);\n                  setArtistsResults(response.data);\n            }\n      };\n      const getAllLocations = async () => {\n            const response = await axios\n                  .get('/locations')\n                  .catch((err) => console.log('Error: ', err));\n            if (response && response.data) setLocationsFull(response.data);\n      };\n\n      useEffect(() => {\n            getAllArtists();\n            getAllLocations();\n      }, []);\n\n      const getLocationsList = () => {\n            const locationsIdList = artistsResults.map((a) => a.location);\n            const locationsToMark = locationsFull.filter((m) =>\n                  locationsIdList.includes(m.id)\n            );\n            setLocationsResults(locationsToMark);\n            console.log(locationsResults);\n      };\n\n      //return only artist with names that includes the input\n      const searchHandler = () => {\n            if (searchTerm !== '') {\n                  console.log('in searchhandler');\n                  const newArtistlist = artistsFull.filter((a) => {\n                        return Object.values(a)\n                              .join(' ')\n                              .toLowerCase()\n                              .includes(searchTerm.toLowerCase());\n                  });\n                  setArtistsResults(newArtistlist);\n                  //get distinct locations array from artistresults list\n                  getLocationsList();\n            } else {\n                  setArtistsResults(artistsFull);\n                  getLocationsList();\n            }\n      };\n      const headerText = 'Admin';\n      // go to artist page once artist selected\n\n      useEffect(() => {\n            console.log('link to this artist page', selectedArtist);\n      }, [selectedArtist]);\n\n      // const history = useHistory();\n      // const goLoginPage = () => history.push('/login');\n\n      const getInput = (inputTerm) => {\n            setSearchTerm(inputTerm);\n            searchHandler();\n      };\n\n      return (\n            <div className='app'>\n                  <HashRouter>\n                        <main className='container'>\n                              <Route exact path='/'>\n                                    <HomePage\n                                          artists={artistsResults}\n                                          locations={locationsResults}\n                                          selectedArtistsCB={setSelectedArtist}\n                                          getInput={getInput}\n                                    />\n                              </Route>\n                              <Route exact path='/login'>\n                                    <LoginPage />\n                              </Route>\n\n                              <Route exact path='/artist/:id'>\n                                    <ArtistPage />\n                              </Route>\n                        </main>\n                  </HashRouter>\n                  <footer className='footer'></footer>;\n            </div>\n      );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}