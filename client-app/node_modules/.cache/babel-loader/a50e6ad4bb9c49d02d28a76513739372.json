{"ast":null,"code":"import _regeneratorRuntime from\"/Users/noamk/Documents/GitHub/music-map/client-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/noamk/Documents/GitHub/music-map/client-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/noamk/Documents/GitHub/music-map/client-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{axios}from'./axios';import{HashRouter,Route}from'react-router-dom';import HomePage from'./pages/HomePage';import LoginPage from'./pages/LoginPage';import ArtistPage from'./pages/ArtistPage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){//    *** APP STATES\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),artistsFull=_useState2[0],setArtistsFull=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),locationsFull=_useState4[0],setLocationsFull=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),searchTerm=_useState6[0],setSearchTerm=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),artistsResults=_useState8[0],setArtistsResults=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),locationsResults=_useState10[0],setLocationsResults=_useState10[1];var _useState11=useState(artistsFull[0]),_useState12=_slicedToArray(_useState11,2),selectedArtist=_useState12[0],setSelectedArtist=_useState12[1];//    ***  GET & SET FULL DATA  ***\nvar getAllArtists=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/artists').catch(function(err){return console.log('Error: ',err);});case 2:response=_context.sent;if(response&&response.data){setArtistsFull(response.data);setArtistsResults(response.data);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function getAllArtists(){return _ref.apply(this,arguments);};}();var getAllLocations=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get('/locations').catch(function(err){return console.log('Error: ',err);});case 2:response=_context2.sent;if(response&&response.data)setLocationsFull(response.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function getAllLocations(){return _ref2.apply(this,arguments);};}();useEffect(function(){getAllArtists();getAllLocations();},[]);//    *** HANDLE SEARCH RESULTS ***\n//1. get input from HomePage and send to searchHandler\nvar getInput=function getInput(inputTerm){// console.log(\"in App \", typeof inputTerm);\n// if (inputTerm.length > 2) {\n//       setSearchTerm('car');\n//       searchHandler();\n// } else {\n//       setSearchTerm(' ');\n// }\n};//2. return only artist with names that includes the input\nvar searchHandler=function searchHandler(){if(searchTerm!==''){console.log('i',searchTerm);var newArtistlist=artistsFull.filter(function(a){return Object.values(a).join(' ').toLowerCase().includes(searchTerm.toLowerCase());});setArtistsResults(newArtistlist);//get distinct locations array from artistresults list\ngetLocationsList();}else{setArtistsResults(artistsFull);console.log('else');getLocationsList();}};//3. filter location list accordind to artist filtered list\nvar getLocationsList=function getLocationsList(){var locationsIdList=artistsResults.map(function(a){return a.location;});var locationsToMark=locationsFull.filter(function(m){return locationsIdList.includes(m.id);});setLocationsResults(locationsToMark);console.log(locationsResults);};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(HashRouter,{children:/*#__PURE__*/_jsxs(\"main\",{className:\"container\",children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(HomePage,{artists:artistsResults,locations:locationsResults,selectedArtistsCB:setSelectedArtist,getInput:getInput})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/login\",children:/*#__PURE__*/_jsx(LoginPage,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/artist/:id\",children:/*#__PURE__*/_jsx(ArtistPage,{})})]})}),/*#__PURE__*/_jsx(\"footer\",{className:\"footer\"}),\";\"]});};export default App;","map":{"version":3,"sources":["/Users/noamk/Documents/GitHub/music-map/client-app/src/App.js"],"names":["React","useState","useEffect","axios","HashRouter","Route","HomePage","LoginPage","ArtistPage","App","artistsFull","setArtistsFull","locationsFull","setLocationsFull","searchTerm","setSearchTerm","artistsResults","setArtistsResults","locationsResults","setLocationsResults","selectedArtist","setSelectedArtist","getAllArtists","get","catch","err","console","log","response","data","getAllLocations","getInput","inputTerm","searchHandler","newArtistlist","filter","a","Object","values","join","toLowerCase","includes","getLocationsList","locationsIdList","map","location","locationsToMark","m","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { axios } from './axios';\nimport { HashRouter, Route } from 'react-router-dom';\nimport HomePage from './pages/HomePage';\nimport LoginPage from './pages/LoginPage';\nimport ArtistPage from './pages/ArtistPage';\n\nconst App = () => {\n      //    *** APP STATES\n      const [artistsFull, setArtistsFull] = useState([]);\n      const [locationsFull, setLocationsFull] = useState([]);\n      const [searchTerm, setSearchTerm] = useState([]);\n      const [artistsResults, setArtistsResults] = useState([]);\n      const [locationsResults, setLocationsResults] = useState([]);\n      const [selectedArtist, setSelectedArtist] = useState(artistsFull[0]);\n\n      //    ***  GET & SET FULL DATA  ***\n      const getAllArtists = async () => {\n            const response = await axios\n                  .get('/artists')\n                  .catch((err) => console.log('Error: ', err));\n            if (response && response.data) {\n                  setArtistsFull(response.data);\n                  setArtistsResults(response.data);\n            }\n      };\n      const getAllLocations = async () => {\n            const response = await axios\n                  .get('/locations')\n                  .catch((err) => console.log('Error: ', err));\n            if (response && response.data) setLocationsFull(response.data);\n      };\n\n      useEffect(() => {\n            getAllArtists();\n            getAllLocations();\n      }, []);\n\n      //    *** HANDLE SEARCH RESULTS ***\n\n      //1. get input from HomePage and send to searchHandler\n      const getInput = (inputTerm) => {\n            // console.log(\"in App \", typeof inputTerm);\n            // if (inputTerm.length > 2) {\n            //       setSearchTerm('car');\n            //       searchHandler();\n            // } else {\n            //       setSearchTerm(' ');\n            // }\n      };\n\n      //2. return only artist with names that includes the input\n      const searchHandler = () => {\n            if (searchTerm !== '') {\n                  console.log('i', searchTerm);\n                  const newArtistlist = artistsFull.filter((a) => {\n                        return Object.values(a)\n                              .join(' ')\n                              .toLowerCase()\n                              .includes(searchTerm.toLowerCase());\n                  });\n                  setArtistsResults(newArtistlist);\n                  //get distinct locations array from artistresults list\n                  getLocationsList();\n            } else {\n                  setArtistsResults(artistsFull);\n                  console.log('else');\n                  getLocationsList();\n            }\n      };\n\n      //3. filter location list accordind to artist filtered list\n      const getLocationsList = () => {\n            const locationsIdList = artistsResults.map((a) => a.location);\n            const locationsToMark = locationsFull.filter((m) =>\n                  locationsIdList.includes(m.id)\n            );\n            setLocationsResults(locationsToMark);\n            console.log(locationsResults);\n      };\n\n      return (\n            <div className='app'>\n                  <HashRouter>\n                        <main className='container'>\n                              <Route exact path='/'>\n                                    <HomePage\n                                          artists={artistsResults}\n                                          locations={locationsResults}\n                                          selectedArtistsCB={setSelectedArtist}\n                                          getInput={getInput}\n                                    />\n                              </Route>\n                              <Route exact path='/login'>\n                                    <LoginPage />\n                              </Route>\n\n                              <Route exact path='/artist/:id'>\n                                    <ArtistPage />\n                              </Route>\n                        </main>\n                  </HashRouter>\n                  <footer className='footer'></footer>;\n            </div>\n      );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}