{"ast":null,"code":"var _jsxFileName = \"/Users/noamk/Documents/GitHub/music-map/client-app/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { axios } from './axios';\nimport { HashRouter, Route, useHistory } from 'react-router-dom';\nimport HeaderNavbar from './components/headerNavbar';\nimport HomePage from './pages/HomePage';\nimport LoginPage from './pages/LoginPage';\nimport ArtistPage from './pages/ArtistPage'; //To do : move the input to homepage or header or what ?\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [artistsFull, setArtistsFull] = useState([]);\n  const [locationsFull, setLocationsFull] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const inputEl = useRef('');\n  const [artistsResults, setArtistsResults] = useState([]);\n  const [locationsResults, setLocationsResults] = useState([]);\n  const [selectedArtist, setSelectedArtist] = useState(artistsFull[0]); //**** GET DATA  */\n\n  const getAllArtists = async () => {\n    const response = await axios.get('/artists').catch(err => console.log('Error: ', err));\n\n    if (response && response.data) {\n      setArtistsFull(response.data);\n      setArtistsResults(response.data);\n    }\n  };\n\n  const getAllLocations = async () => {\n    const response = await axios.get('/locations').catch(err => console.log('Error: ', err));\n    if (response && response.data) setLocationsFull(response.data);\n  };\n\n  useEffect(() => {\n    getAllArtists();\n    getAllLocations();\n  }, []);\n\n  const getLocationsList = () => {\n    const locationsIdList = artistsResults.map(a => a.location);\n    const locationsToMark = locationsFull.filter(m => locationsIdList.includes(m.id));\n    setLocationsResults(locationsToMark);\n    console.log(locationsResults);\n  }; //return only artist with names that includes the input\n\n\n  const searchHandler = () => {\n    setSearchTerm(inputEl.current.value);\n\n    if (searchTerm !== '') {\n      const newArtistlist = artistsFull.filter(a => {\n        return Object.values(a).join(' ').toLowerCase().includes(searchTerm.toLowerCase());\n      });\n      setArtistsResults(newArtistlist); //get distinct locations array from artistresults list\n\n      getLocationsList();\n    } else {\n      setArtistsResults(artistsFull);\n      getLocationsList();\n    }\n  };\n\n  const headerText = 'Admin'; // go to artist page once artist selected\n\n  useEffect(() => {\n    console.log('link to this artist page', selectedArtist);\n  }, [selectedArtist]);\n  const history = useHistory();\n\n  const goLoginPage = () => history.push('/login');\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: [/*#__PURE__*/_jsxDEV(HeaderNavbar, {\n        handleText: headerText,\n        handleAction: goLoginPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"searchrow\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"input\",\n          children: \" Search Artist\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: inputEl,\n          type: \"text\",\n          onChange: searchHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(HashRouter, {\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          children: /*#__PURE__*/_jsxDEV(HomePage, {\n            artists: artistsResults,\n            locations: locationsResults,\n            selectedArtistsCB: setSelectedArtist\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/login\",\n          children: /*#__PURE__*/_jsxDEV(LoginPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/artist/:id\",\n          children: /*#__PURE__*/_jsxDEV(ArtistPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"footer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 19\n    }, this), \";\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 13\n  }, this);\n};\n\n_s(App, \"MXMwN5XS4CuIFKL7hnSgwuG0Zp4=\", false, function () {\n  return [useHistory];\n});\n\n_c = App;\nexport default App; //  <>\n//         <HeaderNavbar/>\n//         <div>\n//            <input\n//             ref={inputEl}\n//             type=\"text\"\n//             className=\"prompt\"\n//             onChange={searchHandler} />\n//             <HomePage artists={artistsResults} locations={locationsResults} selectedArtistsCB={setSelectedArtist}/>\n//         </div>\n//         </>\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/noamk/Documents/GitHub/music-map/client-app/src/App.js"],"names":["React","useState","useEffect","useRef","axios","HashRouter","Route","useHistory","HeaderNavbar","HomePage","LoginPage","ArtistPage","App","artistsFull","setArtistsFull","locationsFull","setLocationsFull","searchTerm","setSearchTerm","inputEl","artistsResults","setArtistsResults","locationsResults","setLocationsResults","selectedArtist","setSelectedArtist","getAllArtists","response","get","catch","err","console","log","data","getAllLocations","getLocationsList","locationsIdList","map","a","location","locationsToMark","filter","m","includes","id","searchHandler","current","value","newArtistlist","Object","values","join","toLowerCase","headerText","history","goLoginPage","push"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,SAASC,KAAT,QAAsB,SAAtB;AACA,SAASC,UAAT,EAAqBC,KAArB,EAA4BC,UAA5B,QAA8C,kBAA9C;AAEA,OAAOC,YAAP,MAAyB,2BAAzB;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,OAAOC,SAAP,MAAsB,mBAAtB;AACA,OAAOC,UAAP,MAAuB,oBAAvB,C,CACA;;;;AAEA,MAAMC,GAAG,GAAG,MAAM;AAAA;;AACZ,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCb,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACc,aAAD,EAAgBC,gBAAhB,IAAoCf,QAAQ,CAAC,EAAD,CAAlD;AAEA,QAAM,CAACgB,UAAD,EAAaC,aAAb,IAA8BjB,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAMkB,OAAO,GAAGhB,MAAM,CAAC,EAAD,CAAtB;AAEA,QAAM,CAACiB,cAAD,EAAiBC,iBAAjB,IAAsCpB,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAACqB,gBAAD,EAAmBC,mBAAnB,IAA0CtB,QAAQ,CAAC,EAAD,CAAxD;AAEA,QAAM,CAACuB,cAAD,EAAiBC,iBAAjB,IAAsCxB,QAAQ,CAACY,WAAW,CAAC,CAAD,CAAZ,CAApD,CAVY,CAYZ;;AACA,QAAMa,aAAa,GAAG,YAAY;AAC5B,UAAMC,QAAQ,GAAG,MAAMvB,KAAK,CACrBwB,GADgB,CACZ,UADY,EAEhBC,KAFgB,CAETC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBF,GAAvB,CAFC,CAAvB;;AAGA,QAAIH,QAAQ,IAAIA,QAAQ,CAACM,IAAzB,EAA+B;AACzBnB,MAAAA,cAAc,CAACa,QAAQ,CAACM,IAAV,CAAd;AACAZ,MAAAA,iBAAiB,CAACM,QAAQ,CAACM,IAAV,CAAjB;AACL;AACN,GARD;;AASA,QAAMC,eAAe,GAAG,YAAY;AAC9B,UAAMP,QAAQ,GAAG,MAAMvB,KAAK,CACrBwB,GADgB,CACZ,YADY,EAEhBC,KAFgB,CAETC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBF,GAAvB,CAFC,CAAvB;AAGA,QAAIH,QAAQ,IAAIA,QAAQ,CAACM,IAAzB,EAA+BjB,gBAAgB,CAACW,QAAQ,CAACM,IAAV,CAAhB;AACpC,GALD;;AAOA/B,EAAAA,SAAS,CAAC,MAAM;AACVwB,IAAAA,aAAa;AACbQ,IAAAA,eAAe;AACpB,GAHQ,EAGN,EAHM,CAAT;;AAKA,QAAMC,gBAAgB,GAAG,MAAM;AACzB,UAAMC,eAAe,GAAGhB,cAAc,CAACiB,GAAf,CAAoBC,CAAD,IAAOA,CAAC,CAACC,QAA5B,CAAxB;AACA,UAAMC,eAAe,GAAGzB,aAAa,CAAC0B,MAAd,CAAsBC,CAAD,IACvCN,eAAe,CAACO,QAAhB,CAAyBD,CAAC,CAACE,EAA3B,CADkB,CAAxB;AAGArB,IAAAA,mBAAmB,CAACiB,eAAD,CAAnB;AACAT,IAAAA,OAAO,CAACC,GAAR,CAAYV,gBAAZ;AACL,GAPD,CAlCY,CA2CZ;;;AACA,QAAMuB,aAAa,GAAG,MAAM;AACtB3B,IAAAA,aAAa,CAACC,OAAO,CAAC2B,OAAR,CAAgBC,KAAjB,CAAb;;AAEA,QAAI9B,UAAU,KAAK,EAAnB,EAAuB;AACjB,YAAM+B,aAAa,GAAGnC,WAAW,CAAC4B,MAAZ,CAAoBH,CAAD,IAAO;AAC1C,eAAOW,MAAM,CAACC,MAAP,CAAcZ,CAAd,EACAa,IADA,CACK,GADL,EAEAC,WAFA,GAGAT,QAHA,CAGS1B,UAAU,CAACmC,WAAX,EAHT,CAAP;AAIL,OALqB,CAAtB;AAMA/B,MAAAA,iBAAiB,CAAC2B,aAAD,CAAjB,CAPiB,CAQjB;;AACAb,MAAAA,gBAAgB;AACrB,KAVD,MAUO;AACDd,MAAAA,iBAAiB,CAACR,WAAD,CAAjB;AACAsB,MAAAA,gBAAgB;AACrB;AACN,GAjBD;;AAkBA,QAAMkB,UAAU,GAAG,OAAnB,CA9DY,CA+DZ;;AAEAnD,EAAAA,SAAS,CAAC,MAAM;AACV6B,IAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCR,cAAxC;AACL,GAFQ,EAEN,CAACA,cAAD,CAFM,CAAT;AAIA,QAAM8B,OAAO,GAAG/C,UAAU,EAA1B;;AACA,QAAMgD,WAAW,GAAG,MAAMD,OAAO,CAACE,IAAR,CAAa,QAAb,CAA1B;;AAEA,sBACM;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA,4BACM;AAAA,8BACM,QAAC,YAAD;AACM,QAAA,UAAU,EAAEH,UADlB;AAEM,QAAA,YAAY,EAAEE;AAFpB;AAAA;AAAA;AAAA;AAAA,cADN,eAKM;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,gCACM;AAAO,UAAA,SAAS,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADN,eAEM;AACM,UAAA,GAAG,EAAEpC,OADX;AAEM,UAAA,IAAI,EAAC,MAFX;AAGM,UAAA,QAAQ,EAAE0B;AAHhB;AAAA;AAAA;AAAA;AAAA,gBAFN;AAAA;AAAA;AAAA;AAAA;AAAA,cALN;AAAA;AAAA;AAAA;AAAA;AAAA,YADN,eAeM,QAAC,UAAD;AAAA,6BACM;AAAM,QAAA,SAAS,EAAC,WAAhB;AAAA,gCACM,QAAC,KAAD;AAAO,UAAA,KAAK,MAAZ;AAAa,UAAA,IAAI,EAAC,GAAlB;AAAA,iCACM,QAAC,QAAD;AACM,YAAA,OAAO,EAAEzB,cADf;AAEM,YAAA,SAAS,EAAEE,gBAFjB;AAGM,YAAA,iBAAiB,EAAEG;AAHzB;AAAA;AAAA;AAAA;AAAA;AADN;AAAA;AAAA;AAAA;AAAA,gBADN,eAQM,QAAC,KAAD;AAAO,UAAA,KAAK,MAAZ;AAAa,UAAA,IAAI,EAAC,QAAlB;AAAA,iCACM,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AADN;AAAA;AAAA;AAAA;AAAA,gBARN,eAYM,QAAC,KAAD;AAAO,UAAA,KAAK,MAAZ;AAAa,UAAA,IAAI,EAAC,aAAlB;AAAA,iCACM,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AADN;AAAA;AAAA;AAAA;AAAA,gBAZN;AAAA;AAAA;AAAA;AAAA;AAAA;AADN;AAAA;AAAA;AAAA;AAAA,YAfN,eAiCM;AAAQ,MAAA,SAAS,EAAC;AAAlB;AAAA;AAAA;AAAA;AAAA,YAjCN;AAAA;AAAA;AAAA;AAAA;AAAA,UADN;AAqCL,CA7GD;;GAAMb,G;UAqEgBL,U;;;KArEhBK,G;AA+GN,eAAeA,GAAf,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { axios } from './axios';\nimport { HashRouter, Route, useHistory } from 'react-router-dom';\n\nimport HeaderNavbar from './components/headerNavbar';\nimport HomePage from './pages/HomePage';\nimport LoginPage from './pages/LoginPage';\nimport ArtistPage from './pages/ArtistPage';\n//To do : move the input to homepage or header or what ?\n\nconst App = () => {\n      const [artistsFull, setArtistsFull] = useState([]);\n      const [locationsFull, setLocationsFull] = useState([]);\n\n      const [searchTerm, setSearchTerm] = useState('');\n      const inputEl = useRef('');\n\n      const [artistsResults, setArtistsResults] = useState([]);\n      const [locationsResults, setLocationsResults] = useState([]);\n\n      const [selectedArtist, setSelectedArtist] = useState(artistsFull[0]);\n\n      //**** GET DATA  */\n      const getAllArtists = async () => {\n            const response = await axios\n                  .get('/artists')\n                  .catch((err) => console.log('Error: ', err));\n            if (response && response.data) {\n                  setArtistsFull(response.data);\n                  setArtistsResults(response.data);\n            }\n      };\n      const getAllLocations = async () => {\n            const response = await axios\n                  .get('/locations')\n                  .catch((err) => console.log('Error: ', err));\n            if (response && response.data) setLocationsFull(response.data);\n      };\n\n      useEffect(() => {\n            getAllArtists();\n            getAllLocations();\n      }, []);\n\n      const getLocationsList = () => {\n            const locationsIdList = artistsResults.map((a) => a.location);\n            const locationsToMark = locationsFull.filter((m) =>\n                  locationsIdList.includes(m.id)\n            );\n            setLocationsResults(locationsToMark);\n            console.log(locationsResults);\n      };\n\n      //return only artist with names that includes the input\n      const searchHandler = () => {\n            setSearchTerm(inputEl.current.value);\n\n            if (searchTerm !== '') {\n                  const newArtistlist = artistsFull.filter((a) => {\n                        return Object.values(a)\n                              .join(' ')\n                              .toLowerCase()\n                              .includes(searchTerm.toLowerCase());\n                  });\n                  setArtistsResults(newArtistlist);\n                  //get distinct locations array from artistresults list\n                  getLocationsList();\n            } else {\n                  setArtistsResults(artistsFull);\n                  getLocationsList();\n            }\n      };\n      const headerText = 'Admin';\n      // go to artist page once artist selected\n\n      useEffect(() => {\n            console.log('link to this artist page', selectedArtist);\n      }, [selectedArtist]);\n\n      const history = useHistory();\n      const goLoginPage = () => history.push('/login');\n\n      return (\n            <div className='app'>\n                  <header>\n                        <HeaderNavbar\n                              handleText={headerText}\n                              handleAction={goLoginPage}\n                        />\n                        <div className='searchrow'>\n                              <label className='input'> Search Artist</label>\n                              <input\n                                    ref={inputEl}\n                                    type='text'\n                                    onChange={searchHandler}\n                              />\n                        </div>\n                  </header>\n                  <HashRouter>\n                        <main className='container'>\n                              <Route exact path='/'>\n                                    <HomePage\n                                          artists={artistsResults}\n                                          locations={locationsResults}\n                                          selectedArtistsCB={setSelectedArtist}\n                                    />\n                              </Route>\n                              <Route exact path='/login'>\n                                    <LoginPage />\n                              </Route>\n\n                              <Route exact path='/artist/:id'>\n                                    <ArtistPage />\n                              </Route>\n                        </main>\n                  </HashRouter>\n                  <footer className='footer'></footer>;\n            </div>\n      );\n};\n\nexport default App;\n\n//  <>\n//         <HeaderNavbar/>\n//         <div>\n//            <input\n//             ref={inputEl}\n//             type=\"text\"\n//             className=\"prompt\"\n//             onChange={searchHandler} />\n\n//             <HomePage artists={artistsResults} locations={locationsResults} selectedArtistsCB={setSelectedArtist}/>\n\n//         </div>\n//         </>\n"]},"metadata":{},"sourceType":"module"}